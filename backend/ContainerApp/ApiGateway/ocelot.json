{
  "Routes": [
    {
      "UpstreamPathTemplate": "/{everything}",
      "UpstreamHttpMethod": [ "OPTIONS" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "manager",
          "Port": 5001
        }
      ],
      "DownstreamPathTemplate": "/{everything}",
      "RouteIsCaseSensitive": false
    },

    {
      "UpstreamPathTemplate": "/auth/{everything}",
      "UpstreamHttpMethod": [ "GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "manager",
          "Port": 5001
        }
      ],
      "DownstreamPathTemplate": "/auth/{everything}",
      "RouteIsCaseSensitive": false
    },

    {
      "UpstreamPathTemplate": "/users-manager/user",
      "UpstreamHttpMethod": [ "POST" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "manager",
          "Port": 5001
        }
      ],
      "DownstreamPathTemplate": "/users-manager/user",
      "RouteIsCaseSensitive": false
    },

    {
      "UpstreamPathTemplate": "/games-manager/{everything}",
      "UpstreamHttpMethod": [ "GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "manager",
          "Port": 5001
        }
      ],
      "DownstreamPathTemplate": "/games-manager/{everything}",
      "RouteIsCaseSensitive": false
    },

    {
      "UpstreamPathTemplate": "/notificationHub/negotiate",
      "UpstreamHttpMethod": [ "POST", "OPTIONS" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "manager",
          "Port": 5001
        }
      ],
      "DownstreamPathTemplate": "/notificationHub/negotiate",
      "RouteIsCaseSensitive": false
    },

    // --- NEW: no-token endpoints ---
    {
      "UpstreamPathTemplate": "/internal/compute-stats/ping",
      "UpstreamHttpMethod": [ "POST" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "manager",
          "Port": 5001
        }
      ],
      "DownstreamPathTemplate": "/internal/compute-stats/ping",
      "RouteIsCaseSensitive": false
    },
    {
      "UpstreamPathTemplate": "/internal/stats/latest",
      "UpstreamHttpMethod": [ "GET" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "manager",
          "Port": 5001
        }
      ],
      "DownstreamPathTemplate": "/internal/stats/latest",
      "RouteIsCaseSensitive": false
    },

    // --- Learning Manager Service Routes ---
    {
      "UpstreamPathTemplate": "/learnings-manager/{everything}",
      "UpstreamHttpMethod": [ "GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "learning-manager",
          "Port": 5030
        }
      ],
      "DownstreamPathTemplate": "/{everything}",
      "RouteIsCaseSensitive": false,
      "AuthenticationOptions": {
        "AuthenticationProviderKey": "JwtBearer",
        "AllowedScopes": []
      }
    },

    // --- AI Engine Service Routes ---
    {
      "UpstreamPathTemplate": "/ai-engine/{everything}",
      "UpstreamHttpMethod": [ "GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "aiengine",
          "Port": 5020
        }
      ],
      "DownstreamPathTemplate": "/{everything}",
      "RouteIsCaseSensitive": false,
      "AuthenticationOptions": {
        "AuthenticationProviderKey": "JwtBearer",
        "AllowedScopes": []
      }
    },

    // --- Storage Accessor Service Routes ---
    {
      "UpstreamPathTemplate": "/storage-accessor/{everything}",
      "UpstreamHttpMethod": [ "GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "storage-accessor",
          "Port": 5011
        }
      ],
      "DownstreamPathTemplate": "/{everything}",
      "RouteIsCaseSensitive": false,
      "AuthenticationOptions": {
        "AuthenticationProviderKey": "JwtBearer",
        "AllowedScopes": []
      }
    },

    // --- Database Accessor Service Routes ---
    {
      "UpstreamPathTemplate": "/database-accessor/{everything}",
      "UpstreamHttpMethod": [ "GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "database-accessor",
          "Port": 5010
        }
      ],
      "DownstreamPathTemplate": "/{everything}",
      "RouteIsCaseSensitive": false,
      "AuthenticationOptions": {
        "AuthenticationProviderKey": "JwtBearer",
        "AllowedScopes": []
      }
    },

    {
      "UpstreamPathTemplate": "/{everything}",
      "UpstreamHttpMethod": [ "GET", "POST", "PUT", "DELETE", "PATCH" ],
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "manager",
          "Port": 5001
        }
      ],
      "DownstreamPathTemplate": "/{everything}",
      "RouteIsCaseSensitive": false,
      "AuthenticationOptions": {
        "AuthenticationProviderKey": "JwtBearer",
        "AllowedScopes": []
      }
    }
  ],
  "GlobalConfiguration": {
    "RequestIdKey": "X-Request-Id"
  }
}
