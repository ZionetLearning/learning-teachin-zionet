# PROD overrides for the Helm chart
global:
  dockerRegistry: ""   # CI sets: docker.io/<org> or <acr>.azurecr.io
  imagePullPolicy: IfNotPresent   # or Always if you rely on :latest
  spot:
    enabled: false  # Enable spot nodes for cost optimization in prod
  dapr:
    enabled: true
    configName: dapr-config

namespace:
  create: true
  name: prod

cronjobs:
  statsPing:
    enabled: false

  refreshSessionsCleanup:
    enabled: true
    schedule: "30 2 * * *"   # nightly at 02:30

manager:
  image: {}
  env:
    ASPNETCORE_URLS: "http://+:5001"
  # Consider adding resource limits here if you introduce them in templates
  ingress:
    enabled: true
    host: teachin.westeurope.cloudapp.azure.com
    basePath: /api
    tls:
      enabled: true
      clusterIssuer: letsencrypt-prod
      secretName: teachin-tls

engine:
  image: {}
  env:
    ASPNETCORE_URLS: "http://+:5002"
    AzureOpenAI__Endpoint: "https://france-teachin-open-ai.openai.azure.com/"
    AzureOpenAI__ApiKey: ""       # Prefer secret/KeyVault/CI variable
    AzureOpenAI__DeploymentName: "gpt-4.1-mini"
    AzureOpenAI__ModelId: "gpt-4o-mini"
    AzureSpeech__SubscriptionKey: ""
    AzureSpeech__Region: "eastus"
    AzureSpeech__DefaultVoice: "he-IL-HilaNeural"
    AzureSpeech__TimeoutSeconds: "70"

accessor:
  image: {}
  env:
    ASPNETCORE_URLS: "http://+:5003"

# Langfuse Configuration (enabled in prod)
langfuse:
  enabled: true